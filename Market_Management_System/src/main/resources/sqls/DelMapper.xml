<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sic.pdm.model.DelIDao">
 
<!-- 배송지 목록 조회 --> 
<select id="getDelList" parameterType="java.lang.String" resultType="DelVo">
SELECT DNUM,DNAME,ID,ROADADDR ,ADDR,PHONE,ADDRFLAG 
	FROM DELIVERYLIST d 
	WHERE ID=#{id}
</select>

 <select id="getOneDelList" parameterType="java.lang.String" resultType="DelVo">
SELECT DNUM,DNAME,ID,ROADADDR ,ADDR,PHONE,ADDRFLAG 
	FROM DELIVERYLIST d 
	WHERE DNUM=#{dnum}
</select>

<!-- 배송지 등록 -->
<insert id="insertDel" parameterType="DelVo">
INSERT INTO MARKET.DELIVERYLIST
(DNUM, DNAME, ID, ROADADDR, ADDR,PHONE)
VALUES(DNUM_SEQ.NEXTVAL, #{dname} ,#{id}, #{roadaddr}, #{addr},#{phone})
</insert>

<!-- 배송지 수정 -->
<update id="updateDel" parameterType="DelVo">
UPDATE DELIVERYLIST SET DNAME=#{dname} ROADADDR= #{roadaddr}, ADDR=#{addr}, ADDRFLAG = #{ADDRFLAG}, PHONE=#{phone} 
	WHERE DNUM = #{dnum} 
</update>

<!-- 배송지 삭제 -->
<delete id="deleteDel" parameterType="java.util.Map" >
DELETE FROM DELIVERYLIST 
	WHERE ID = #{id} AND DNUM= #{dnum}
</delete>

<!-- 기본 배송지 조회 -->
<select id="getDefaultAddr" parameterType="java.lang.String" resultType="DelVo">
SELECT DNAME, ROADADDR, ADDR,PHONE FROM DELIVERYLIST WHERE ID=#{id} AND ADDRFLAG='Y'
</select>

</mapper>
